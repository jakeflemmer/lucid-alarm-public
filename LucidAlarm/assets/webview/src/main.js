



// DONE
// scale the pan pic to the height of the window while maintaining aspect ratio -- done 08/02
// define the position of the four navigation planets fluidly -- done 08/02
// put four planets on the top -- done 08/02
// draw tha gradient circles around each planet  -- done 08/03
// put the pages backgrounds on  -- done 08/03
// define basic planet  -- done 08/04
// extend that to position and creat readial gradient for each individual planet  -- done 
// set the oneFifthOfScreen variable  -- done
// set an event listener to determine resize of screen  -- done
// add a gradient shadow border to each page  -- done
// make the text color appropriate to each screen back ground color -- done
// put the contact image on the contact page -- done
// find the contact image  -- done
// define the four colors globally and make the nav planet colors match the text colors on their pages  -- done
// do the matrix animation  -- descoped
// scale page font sizes to match page height  -- done
// grade the left border of the contact image to alpha 0 to blend into the background  -- done
// make each screens image to text ratio of 62%  -- descoped
// monitor framerate  -- descoped for now
// put labels in nav planets  -- done
// optimize speed by not scaling font size every frame  -- done
// extend the sides of the pan pic to accomodate full spring motions  -- done
// seperate scaling logic done on resize from drawing logic done each frame  -- done
// make the nav planets text scaled perfectly  -- done
// prevent it from going into the white space to far right beyond the edge of the pan pic  -- done
// how do you trap changing the screen size ??  -- done
// letterbox the screen if not in landscape layout  -- done
// handle screen orientation  -- done
// validate the email form -- done
// do the screen text for lucid alarm and freelance etc...  -- done
// center the nav planet labels vertically within their planets  -- done
// solve the problem of the disappearing planets  -- done
// deploy live  -- done
// handle form entry on mobile without re scaling screen size  -- done
		// if form entry text input / area is selcted
		// and screen size becomes super small
		// we conclude keyboard has come up
		// and zoom screen in on text area / input selected
// prevent user scrolling the panPic  -- done
// prevent user from zooming in
// prevent navPlanets from disappearing  -- done
// make text on screen not editable / selectable  -- done
// make the jake c flemmer spring onto the screen while images load  -- done
// figure out how to load the images dynamically  -- done
// list and load all images at scale based on screen size  -- done
// scale multiple image sizes  -- done
// dont define left and right page background gradients on each frame  -- done
// wire up sending the email from the contact page thru PHP script  -- done
// display validation errors from email form  -- done
// give the user feedback about if the email was sent successfully or not  -- done
// settle on a reasonable font  -- done
// the preload text is not dissapearing  -- done
// add a progress status bar while loading images  -- done
// prevent virus from being sent through the email  -- done
// send a hidden field pageID and check that it matches in the PHP script  -- done
// optimize more  -- done
// space the m letters further on the preload  -- done
// test on different browsers including safari  -- done
// iPhone leaves blank space at bottom  -- done
// the transmit button sometimes gets the last t on a second line  -- done
// change and simplify the text  -- done
// space it better once advanced work and mobile pages  -- done
// the contact form elements can be selected when on other planets  -- done
// stop the auto scroll and allow user scrolling on the Y axis only to enable showing the url bar once hidden after say 3 seconds  -- done
// android scales keyboard when in portrait  -- done
// cant go back or forwards on iOS web pages cause url bar hidden  -- done
// sometimes text not redrawn after change orienetation of mobile devices  -- done
// arrows become innactive after going to contact planet on mobile  -- done
// iOS not redrawing when screen rotates  -- done
// after resize not panning to correct position  -- done
// write out test logs for all major tests  -- done
// come up with a solution for drawn arrows ( use gt&; and lt&; symbols )  -- done 09/13/13
// change the arrows the < and > like chrome's home page !  -- done 9/17
// make a separate canvas for the arrows  -- done 9/19
// click catching canvas is fucking up the contact form  -- fixed
// add "read more..." links to moodys page  -- done 9/25
// rewrite moodys more section  -- done 10/1
// find freedom tower image  -- done 10/03
// more moodys text takes whole screen  -- done 10/03
// coded the whole lost tv signal effect  -- done 10/9
// scale tower image to all sizes  -- done 10/16
// reduce load time  -- done Jan 2014
// make the background pan pic scroll constantly -- done
// sweeten the preload thing to make it cool -- done
// add sick widgets  -- done
// New freedom tower pick  -- done
// rewrite verbiage to align with our direction  -- done
// our direction = progressive cutting edge web design and cool shit  -- done
// eliminate all boring shit  -- done
//
// 
//-------------------
	// make a super small background image ( maybe w left side only high res )  -- done 10/16
	// load only the minimum size images on initial load cycle  -- done 10/16
	// organize the order of second cycle image load intelligently  -- done 10/16


// Version 1.2
//======================================================================
	
// DEPLOY !!

// have the pages 'pasted' onto the backgroundpanpic 

// have a dropshadow behind the pages

// have a gasseous dissolve on the pages when changing

// have the pages minimize onto surface of planet on backgroundpanpic and maximize out of planet * winner ! :)

// more section / second page of lucid alarm

// original alpha spring effect

// extract the page changing effect into standalone file / functions
	// by having backgroundpanpic onEnterFrame and pageChangerOnEnterFrame functions

// choose after compare / contrast all above effects

// test arrow divs on mobile - maybe assign onclick listeners to the divs themselves

// alternate horizontal layout options

// test and refine

// add the moodys logo to the moodys page

// icons ( android flash java )

// link to blog

// remove the lost tv signal effect code since we dont want the effect after all

// test on all devices

// send the emails to jake@jakeflemmer.com - not jake.c.flemmer - have this email go straight to phone

// highlight selected planet 

// add web and mobile development to preload animation ??

// wire up the freelance page images to link to their respective sites

// make the mouse cursor a pointer ( finger ) when over anything linkable 

// have a vertical layout for portrait mode

// have the planets and the astronauts be moving in every screen

// javascript game

//--------------------------
//--------------------------
//--------------------------
// the new shit!
//we render the page's instantly upon load
//we paint the sky black and draw stars with JavaScript
//we load in full artwork progressively
//Organize all scaling functions
// We saying that the widgets on the left will automatically be 2/10 overall screen width


/*

JCF
-------------
put the jcf version number in the bar code
Create rules to scale all widget it's based on all screen sizes 
Animate the news stories and their images
Deal with the issue of scaling dynamically
screen real estate determines number of widgets and layout ( think android fragments )
Every element animates into position
Work and mobile pages have their images in a film strip along the bottom of their pages
Pages slide left and right
Letterbox only for now

*/ 

// bugs
//--------------------------

	// iPhone scales in when keyboard comes up but doesnt scale out

	// drawing other images / divs (i.e contact imgs ) obscures the moodys read more/less spans

	// sometimes work home page doesnt have background drawn






// images done of descoped
//--------------------------
	// the contact image  -- done



// images to round up
//--------------------------
	
	// the tractor work image ?  -- descoped
	// key point screen shots  -- done
	// moodys banner logo  -- todo
	// visual alchemy logo -- to do
	// lucid alarm icon -- done
	// lucid alarm screen shots  -- to do
	// pyramid project screenshot  -- to do
	// quick balls quick quicks screen shots  -- to do
	// you tube video - or just plain video footage of quick kicks in action  -- todo 
	// the fly javascript game ??  -- todo V2

	// the banner ads i did  -- todo


// VERSION 3 baby ! :)
/*All the new Jarvis goodies
The date of the time the weather the news the stock market
Multiple circles that describe the progress of initializing and gathering all of the data

*/



//---------------------
// deployment notes 

// V1.1 deployed 10/03/13
// V2.113


var ENVIRONMENT_URL = "http://jakeflemmer.com/beta/";


var frameRate = 1000/20;
var frameCounter = 0;

var startTime = 0;

var panPosition = 0;


// spring variables
var spring =.01;
var frizione = .9;
var panDestination = 0;
var vel_x =0;

// navigation planets 
var homePlanet = new Object();
var workPlanet = new Object();
var mobilePlanet = new Object();
var contactPlanet = new Object();

var navPlanetRadius = 0;

var homePlanetXPan = -600;
var workPlanetXPan = -2000;
var mobilePlanetXPan = -3500;
var contactPlanetXPan = -8000;

var backgroundPanPicScaledWidth = 0;

// pages
var homePage = new Object();
var workPage = new Object();
var mobilePage = new Object();
var contactPage = new Object();

var currentPlanet = homePlanet;

var pageMaxAlpha = 1;

var goldenRatio = 0.62;

var minimumScreenHeight = 150;

var request;

var killWidgets = false;

var digitalWatchWidget;

var remAlarmLabelWidget;
var finalAlarmLabelWidget;


function testEcho(message){
	console.log("blah!");
     Android.doEchoTest(message);
}

function showAndroidToast(toast) {
        Android.showToast(toast);
    }

function init()
{

	//showAndroidToast("sup");

	// prevent touch scrolling on mobile phones
	//document.addEventListener('touchmove', function(e){
	//	e.preventDefault(); });

	

	// prevent scrolling !!
	//document.addEventListener('touchstart', function(e){ 
	//	e.preventDefault(); });


	//$('body').addClass('stop-scrolling');

	// make background black
	document.body.style.background = "black";

	$('body').css( { 'position' : 'absolute' });

	// to hide the address bar on mobile
    window.scrollTo(0, 1);

	//document.body.style.cursor = 'pointer';


	// // add cursor styling
 //        $("#redRightArrowPic").on('mouseover', function() {
 //          document.body.style.cursor = 'pointer';
 //        });
 //        $("#redRightArrowPic").on('mouseout', function() {
 //          document.body.style.cursor = 'default';
 //        });
//

	imageLoadDelayTime = 0;

	preloadArt();

	scaleAndMakeVisibleBackgroundPic();
	
	
	
	startMain();

	
}

function startMain()
{

	$("#backgroundPanPic").css( { 'opacity' : "1.0"} );

	setGlobalScalingVariables();

	setEventListeners();	

	emulateWindowResize();  // which defines the planets and pages

	

	startTime = new Date().getTime();

	window.scrollTo(0, 1);
	setTimeout(setWindowScrolling , 3000);
	
	
	var minCircleSize;

	var centerX;
	var centerY;
	var remLabelY;
	var remLabelX;
	var finalLabelX;
	var finalLabelY;

	if ( screenIsInPortraitMode() )
	{
		centerX = screenWidth * .5;
		centerY = screenHeight * .33;
		minCircleSize = screenWidth * .2;
		remLabelX = centerX;
		remLabelY = screenHeight * .66;
		finalLabelX = centerX;
		finalLabelY = screenHeight * .82;
	}	
	else{
		// landscape mode
		centerX = screenWidth * .25;
		centerY = screenHeight * .5;
		minCircleSize = screenHeight * .2;
		remLabelX = screenWidth * .6;
		remLabelY = screenHeight * .33;
		finalLabelX = screenWidth * .6;
		finalLabelY = screenHeight * .66;
	}
	var circleWidget = new SpinningCirclesWidget("circleWidgetCanvas", minCircleSize, centerX, centerY, 4 , minCircleSize * .25, .8, 40);
	circleWidget.startSpinning();

	digitalWatchWidget = new DigitalWatchWidget ("digitalClockWidgetCanvas", minCircleSize, centerX, centerY);
	digitalWatchWidget.setCurrentTime();
	digitalWatchWidget.clockTick();

	if ( screenIsInPortraitMode() )
	{
		remLabelX = centerX - circleWidget.maxRadius * .5;		
		finalLabelX = centerX - circleWidget.maxRadius * .5;		
	}	

	var iconSrc;
	if ( THEME == "cloudsTheme")
	{
		iconSrc = "images/ic_power_white.png";
	}
	if ( THEME == "spaceTheme")
	{
		iconSrc = "images/ic_power_green.png";
	}

	//AlarmLabelWidget(alarmName, canvasName, alarmLabelPrefix, alarmIsSet, xPos, yPos)
	remAlarmLabelWidget = new AlarmLabelWidget("rem", "remAlarmLabelCanvas", "REM : ", iconSrc, remLabelX, remLabelY);
	finalAlarmLabelWidget = new AlarmLabelWidget("final", "finalAlarmLabelCanvas", "Final : ", iconSrc, finalLabelX, finalLabelY);

	showAlarmTimeDisplays("Not Set","Not Set");
}

function updateTrueTime () {

	digitalWatchWidget.setCurrentTime();
}
 
 //below method must be exposed to be called from Java - Android
function showAlarmTimeDisplays ( remTimeSet , finalTimeSet) {

	if ( remTimeSet == "undefined" || finalTimeSet == "undefined" ) return;

	remAlarmLabelWidget.drawAlarmTimeWidget( remTimeSet );
	finalAlarmLabelWidget.drawAlarmTimeWidget( finalTimeSet );
	
}




//=========================================================
//=========================================================

function Page()
{
	var page = new Object();
	page.title = "";
}

function setWindowScrolling()
{
	window.scrollTo(0, 1);
	setTimeout(setWindowScrolling,1000);
}
